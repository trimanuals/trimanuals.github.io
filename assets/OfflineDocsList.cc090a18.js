import{Q as F}from"./QBar.704848d4.js";import{ac as U,cH as V,an as q,cI as L,cs as E,a as G,n as A,ap as n,ax as u,as as t,ar as e,av as H,aq as v,aZ as x,a7 as D,a5 as c,aD as W,C as Z,aS as M,a6 as _,aN as f,aw as r,au as Q,bu as j,J as C,Q as O,a3 as K,bn as T,b9 as P,a$ as z,aP as X,aQ as Y,R as N,bo as R,cv as ee,aJ as te,az as ae,bE as oe}from"./index.6def9867.js";import{_ as le}from"./ProductTitle.a71dd329.js";import{_ as ne}from"./ProductImage.56610a4a.js";import{e as se}from"./timestampChecker.15a6dc47.js";const ue={class:"col text-center text-weight-bold"},de=U({__name:"OfflineProductItem",props:V({product:{},documents:{},index:{},useSelection:{type:Boolean}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:V(["go","update","delete"],["update:modelValue"]),setup(y,{emit:w}){const{t:d}=q(),S=y,b=L(y,"modelValue"),i=w,h=E(),{documentsInDownloadQueue:I}=G(h),B=A(()=>S.documents.map(o=>o._id)),k=A(()=>S.documents.map(o=>{const p=o.lastSyncedAt?Number(o.lastSyncedAt):Date.now();return se(p)})),$=A(()=>I.value.filter(o=>B.value.includes(o.id)));return(o,p)=>(n(),u(Y,{flat:!o.useSelection,bordered:!o.useSelection},{default:t(()=>[e(ne,{"image-url":"http://undefined"}),e(F,{dark:"",class:"bg-primary text-white",dense:""},{default:t(()=>[H("div",ue,[e(le,{product:{product:o.product.product,type:o.product.productDetails}},null,8,["product"])])]),_:1}),e(X,null,{default:t(()=>[(n(!0),v(z,null,x(o.documents.filter(s=>s.productId===o.product.product._id),s=>(n(),v("div",{key:s._id},[e(D,{tag:"label"},{default:t(()=>[o.useSelection?(n(),u(c,{key:0,side:""},{default:t(()=>{var a;return[(a=$.value.find(l=>l.id===s._id))!=null&&a.inProgress?(n(),u(W,{key:0,color:"primary",size:"2em"})):(n(),u(Z,{key:1,modelValue:b.value,"onUpdate:modelValue":p[0]||(p[0]=l=>b.value=l),dense:""},null,8,["modelValue"]))]}),_:2},1024)):M("",!0),e(c,null,{default:t(()=>[e(_,null,{default:t(()=>[f(r(s.title),1)]),_:2},1024),e(_,{caption:"",lines:"1"},{default:t(()=>{var a;return[f(r((a=s.metadata.docType)==null?void 0:a.systemTitle),1)]}),_:2},1024),e(_,{caption:""},{default:t(()=>{var a;return[f(r(Q(d)("documents.lastSyncedAt"))+" "+r(s.lastSyncedAt&&new Date(s.lastSyncedAt).toLocaleDateString())+" ",1),(a=k.value[o.index])!=null&&a.isWarning?(n(),u(j,{key:0,color:"red",floating:""},{default:t(()=>{var l;return[e(C,{name:"warning"}),f(" "+r((l=k.value[o.index])==null?void 0:l.message),1)]}),_:1})):M("",!0)]}),_:2},1024)]),_:2},1024),o.useSelection?(n(),u(c,{key:1,side:""},{default:t(()=>[e(O,{color:"primary",icon:"fal fa-ellipsis-v",flat:""},{default:t(()=>[e(K,null,{default:t(()=>[T((n(),u(D,{clickable:"",onClick:a=>i("go",s)},{default:t(()=>[e(c,{side:""},{default:t(()=>[e(C,{name:"fal fa-book-open"})]),_:1}),e(c,null,{default:t(()=>[e(_,null,{default:t(()=>[f(r(Q(d)("buttons.go")),1)]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[N],[R]]),e(P),T((n(),u(D,{clickable:"",onClick:a=>i("update",s._id)},{default:t(()=>[e(c,{side:""},{default:t(()=>[e(C,{name:"fal fa-sync"})]),_:1}),e(c,null,{default:t(()=>[e(_,null,{default:t(()=>[f(r(Q(d)("buttons.sync")),1)]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[N],[R]]),e(P),T((n(),u(D,{clickable:"",color:"negative",onClick:a=>i("delete",s._id)},{default:t(()=>[e(c,{side:""},{default:t(()=>[e(C,{name:"fal fa-trash",color:"negative"})]),_:1}),e(c,null,{default:t(()=>[e(_,null,{default:t(()=>[f(r(Q(d)("buttons.delete")),1)]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[N],[R]])]),_:2},1024)]),_:2},1024)]),_:2},1024)):(n(),u(c,{key:2,side:""},{default:t(()=>[e(O,{color:"primary",icon:"fal fa-book-open",round:"",unelevated:"",onClick:a=>{var l,m;return i("go",s,((m=(l=k.value[o.index])==null?void 0:l.expiryPercentage)!=null?m:0)>=100)}},null,8,["onClick"])]),_:2},1024))]),_:2},1024)]))),128))]),_:1})]),_:1},8,["flat","bordered"]))}}),ce={class:"row q-col-gutter-sm"},_e=U({__name:"OfflineDocsList",props:V({products:{},documents:{},useSelection:{type:Boolean}},{modelValue:{default:[]},modelModifiers:{}}),emits:V(["reloadRequest"],["update:modelValue"]),setup(y,{emit:w}){const{t:d}=q(),S=y,b=w,i=L(y,"modelValue"),h=E(),{addDocToDownloadQueue:I}=h,B=ee(),{deleteOfflineDocumentDataById:k}=B,$=async a=>{const l=S.documents.find(m=>m._id===a);l&&l.productId&&await I(l._id,l.title,l.productId,!0)},o=async a=>{ae({title:d("documents.offline.delete.title"),message:d("documents.offline.delete.message"),submit:d("buttons.delete"),cancel:d("buttons.cancel")}).onOk(async()=>{await k(a),await b("reloadRequest")})},p=te(),s=(a,l)=>{if(l){oe({type:"negative",message:d("errors.documentExpired")});return}p.push(`/document/${a._id}?offline=true`)};return(a,l)=>(n(),v("div",ce,[(n(!0),v(z,null,x(a.products,(m,g)=>(n(),v("div",{key:m.product._id||g,class:"col-xs-12 col-3-md"},[i.value[g]?(n(),u(de,{key:0,modelValue:i.value[g].checked,"onUpdate:modelValue":J=>i.value[g].checked=J,"use-selection":a.useSelection,documents:a.documents,product:m,index:g,onUpdate:$,onDelete:o,onGo:s},null,8,["modelValue","onUpdate:modelValue","use-selection","documents","product","index"])):M("",!0)]))),128))]))}});export{_e as _};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT2ZmbGluZURvY3NMaXN0LmNjMDkwYTE4LmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29tcG9uZW50cy9vZmZsaW5lL09mZmxpbmVQcm9kdWN0SXRlbS52dWUiLCIuLi8uLi8uLi9zcmMvY29tcG9uZW50cy9vZmZsaW5lL09mZmxpbmVEb2NzTGlzdC52dWUiXSwic291cmNlc0NvbnRlbnQiOlsiPHRlbXBsYXRlPlxuICA8cS1jYXJkIDpmbGF0PVwiIXVzZVNlbGVjdGlvblwiIDpib3JkZXJlZD1cIiF1c2VTZWxlY3Rpb25cIj5cbiAgICA8IS0tIFRPRE8gR2V0IHByb2R1Y3QgaW1hZ2UgaGVyZSAtLT5cbiAgICA8UHJvZHVjdEltYWdlIDppbWFnZS11cmw9XCInaHR0cDovL3VuZGVmaW5lZCdcIiAvPlxuICAgIDxxLWJhciBkYXJrIGNsYXNzPVwiYmctcHJpbWFyeSB0ZXh0LXdoaXRlXCIgZGVuc2U+XG4gICAgICA8ZGl2IGNsYXNzPVwiY29sIHRleHQtY2VudGVyIHRleHQtd2VpZ2h0LWJvbGRcIj5cbiAgICAgICAgPFByb2R1Y3RUaXRsZVxuICAgICAgICAgIDpwcm9kdWN0PVwie1xuICAgICAgICAgICAgcHJvZHVjdDogcHJvZHVjdC5wcm9kdWN0LFxuICAgICAgICAgICAgdHlwZTogcHJvZHVjdC5wcm9kdWN0RGV0YWlscyxcbiAgICAgICAgICB9XCJcbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgIDwvcS1iYXI+XG5cbiAgICA8cS1jYXJkLXNlY3Rpb24+XG4gICAgICA8ZGl2XG4gICAgICAgIHYtZm9yPVwiZG9jIGluIGRvY3VtZW50cy5maWx0ZXIoXG4gICAgICAgICAgKGRvYykgPT4gZG9jLnByb2R1Y3RJZCA9PT0gcHJvZHVjdC5wcm9kdWN0Ll9pZFxuICAgICAgICApXCJcbiAgICAgICAgOmtleT1cImRvYy5faWRcIlxuICAgICAgPlxuICAgICAgICA8cS1pdGVtIHRhZz1cImxhYmVsXCI+XG4gICAgICAgICAgPHEtaXRlbS1zZWN0aW9uIHYtaWY9XCJ1c2VTZWxlY3Rpb25cIiBzaWRlPlxuICAgICAgICAgICAgPHEtc3Bpbm5lclxuICAgICAgICAgICAgICB2LWlmPVwiXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRTdGF0dXNlcy5maW5kKChzdGF0dXMpID0+IHN0YXR1cy5pZCA9PT0gZG9jLl9pZClcbiAgICAgICAgICAgICAgICAgID8uaW5Qcm9ncmVzc1xuICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgICBjb2xvcj1cInByaW1hcnlcIlxuICAgICAgICAgICAgICBzaXplPVwiMmVtXCJcbiAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICAgIDxxLWNoZWNrYm94IHYtZWxzZSB2LW1vZGVsPVwibW9kZWxcIiBkZW5zZSAvPlxuICAgICAgICAgIDwvcS1pdGVtLXNlY3Rpb24+XG5cbiAgICAgICAgICA8cS1pdGVtLXNlY3Rpb24+XG4gICAgICAgICAgICA8cS1pdGVtLWxhYmVsPnt7IGRvYy50aXRsZSB9fTwvcS1pdGVtLWxhYmVsPlxuICAgICAgICAgICAgPHEtaXRlbS1sYWJlbCBjYXB0aW9uIGxpbmVzPVwiMVwiPlxuICAgICAgICAgICAgICB7eyBkb2MubWV0YWRhdGEuZG9jVHlwZT8uc3lzdGVtVGl0bGUgfX1cbiAgICAgICAgICAgIDwvcS1pdGVtLWxhYmVsPlxuICAgICAgICAgICAgPHEtaXRlbS1sYWJlbCBjYXB0aW9uPlxuICAgICAgICAgICAgICB7eyB0KCdkb2N1bWVudHMubGFzdFN5bmNlZEF0JykgfX1cbiAgICAgICAgICAgICAge3tcbiAgICAgICAgICAgICAgICBkb2MubGFzdFN5bmNlZEF0ICYmXG4gICAgICAgICAgICAgICAgbmV3IERhdGUoZG9jLmxhc3RTeW5jZWRBdCkudG9Mb2NhbGVEYXRlU3RyaW5nKClcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPHEtYmFkZ2VcbiAgICAgICAgICAgICAgICB2LWlmPVwiZXhwaXJlZERvY3VtZW50c1tpbmRleF0/LmlzV2FybmluZ1wiXG4gICAgICAgICAgICAgICAgY29sb3I9XCJyZWRcIlxuICAgICAgICAgICAgICAgIGZsb2F0aW5nXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8cS1pY29uIG5hbWU9XCJ3YXJuaW5nXCIgLz5cbiAgICAgICAgICAgICAgICB7eyBleHBpcmVkRG9jdW1lbnRzW2luZGV4XT8ubWVzc2FnZSB9fVxuICAgICAgICAgICAgICA8L3EtYmFkZ2U+XG4gICAgICAgICAgICA8L3EtaXRlbS1sYWJlbD5cbiAgICAgICAgICA8L3EtaXRlbS1zZWN0aW9uPlxuICAgICAgICAgIDxxLWl0ZW0tc2VjdGlvbiB2LWlmPVwidXNlU2VsZWN0aW9uXCIgc2lkZT5cbiAgICAgICAgICAgIDxxLWJ0biBjb2xvcj1cInByaW1hcnlcIiBpY29uPVwiZmFsIGZhLWVsbGlwc2lzLXZcIiBmbGF0PlxuICAgICAgICAgICAgICA8cS1tZW51PlxuICAgICAgICAgICAgICAgIDxxLWl0ZW1cbiAgICAgICAgICAgICAgICAgIHYtcmlwcGxlXG4gICAgICAgICAgICAgICAgICB2LWNsb3NlLXBvcHVwXG4gICAgICAgICAgICAgICAgICBjbGlja2FibGVcbiAgICAgICAgICAgICAgICAgIEBjbGljaz1cImVtaXQoJ2dvJywgZG9jKVwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPHEtaXRlbS1zZWN0aW9uIHNpZGU+XG4gICAgICAgICAgICAgICAgICAgIDxxLWljb24gbmFtZT1cImZhbCBmYS1ib29rLW9wZW5cIiAvPlxuICAgICAgICAgICAgICAgICAgPC9xLWl0ZW0tc2VjdGlvbj5cbiAgICAgICAgICAgICAgICAgIDxxLWl0ZW0tc2VjdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgPHEtaXRlbS1sYWJlbD57eyB0KCdidXR0b25zLmdvJykgfX08L3EtaXRlbS1sYWJlbD5cbiAgICAgICAgICAgICAgICAgIDwvcS1pdGVtLXNlY3Rpb24+XG4gICAgICAgICAgICAgICAgPC9xLWl0ZW0+XG4gICAgICAgICAgICAgICAgPHEtc2VwYXJhdG9yIC8+XG4gICAgICAgICAgICAgICAgPHEtaXRlbVxuICAgICAgICAgICAgICAgICAgdi1yaXBwbGVcbiAgICAgICAgICAgICAgICAgIHYtY2xvc2UtcG9wdXBcbiAgICAgICAgICAgICAgICAgIGNsaWNrYWJsZVxuICAgICAgICAgICAgICAgICAgQGNsaWNrPVwiZW1pdCgndXBkYXRlJywgZG9jLl9pZClcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxxLWl0ZW0tc2VjdGlvbiBzaWRlPlxuICAgICAgICAgICAgICAgICAgICA8cS1pY29uIG5hbWU9XCJmYWwgZmEtc3luY1wiIC8+XG4gICAgICAgICAgICAgICAgICA8L3EtaXRlbS1zZWN0aW9uPlxuICAgICAgICAgICAgICAgICAgPHEtaXRlbS1zZWN0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8cS1pdGVtLWxhYmVsPnt7IHQoJ2J1dHRvbnMuc3luYycpIH19PC9xLWl0ZW0tbGFiZWw+XG4gICAgICAgICAgICAgICAgICA8L3EtaXRlbS1zZWN0aW9uPlxuICAgICAgICAgICAgICAgIDwvcS1pdGVtPlxuICAgICAgICAgICAgICAgIDxxLXNlcGFyYXRvciAvPlxuICAgICAgICAgICAgICAgIDxxLWl0ZW1cbiAgICAgICAgICAgICAgICAgIHYtcmlwcGxlXG4gICAgICAgICAgICAgICAgICB2LWNsb3NlLXBvcHVwXG4gICAgICAgICAgICAgICAgICBjbGlja2FibGVcbiAgICAgICAgICAgICAgICAgIGNvbG9yPVwibmVnYXRpdmVcIlxuICAgICAgICAgICAgICAgICAgQGNsaWNrPVwiZW1pdCgnZGVsZXRlJywgZG9jLl9pZClcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxxLWl0ZW0tc2VjdGlvbiBzaWRlPlxuICAgICAgICAgICAgICAgICAgICA8cS1pY29uIG5hbWU9XCJmYWwgZmEtdHJhc2hcIiBjb2xvcj1cIm5lZ2F0aXZlXCIgLz5cbiAgICAgICAgICAgICAgICAgIDwvcS1pdGVtLXNlY3Rpb24+XG4gICAgICAgICAgICAgICAgICA8cS1pdGVtLXNlY3Rpb24+XG4gICAgICAgICAgICAgICAgICAgIDxxLWl0ZW0tbGFiZWw+e3sgdCgnYnV0dG9ucy5kZWxldGUnKSB9fTwvcS1pdGVtLWxhYmVsPlxuICAgICAgICAgICAgICAgICAgPC9xLWl0ZW0tc2VjdGlvbj5cbiAgICAgICAgICAgICAgICA8L3EtaXRlbT5cbiAgICAgICAgICAgICAgPC9xLW1lbnU+XG4gICAgICAgICAgICA8L3EtYnRuPlxuICAgICAgICAgIDwvcS1pdGVtLXNlY3Rpb24+XG4gICAgICAgICAgPHEtaXRlbS1zZWN0aW9uIHYtZWxzZSBzaWRlPlxuICAgICAgICAgICAgPHEtYnRuXG4gICAgICAgICAgICAgIGNvbG9yPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgIGljb249XCJmYWwgZmEtYm9vay1vcGVuXCJcbiAgICAgICAgICAgICAgcm91bmRcbiAgICAgICAgICAgICAgdW5lbGV2YXRlZFxuICAgICAgICAgICAgICBAY2xpY2s9XCJcbiAgICAgICAgICAgICAgICBlbWl0KFxuICAgICAgICAgICAgICAgICAgJ2dvJyxcbiAgICAgICAgICAgICAgICAgIGRvYyxcbiAgICAgICAgICAgICAgICAgIChleHBpcmVkRG9jdW1lbnRzW2luZGV4XT8uZXhwaXJ5UGVyY2VudGFnZSA/PyAwKSA+PSAxMDBcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvcS1pdGVtLXNlY3Rpb24+XG4gICAgICAgIDwvcS1pdGVtPlxuICAgICAgPC9kaXY+XG4gICAgPC9xLWNhcmQtc2VjdGlvbj5cbiAgPC9xLWNhcmQ+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0IGxhbmc9XCJ0c1wiIHNldHVwPlxuaW1wb3J0IHsgRE9DVU1FTlQgfSBmcm9tICcuLi8uLi9AdHlwZXMvZG9jdW1lbnQnO1xuaW1wb3J0IHsgSU9mZmxpbmVQcm9kdWN0RGF0YSB9IGZyb20gJy4uLy4uL3NxbGl0ZS1kYXRhYmFzZS9vZmZsaW5lLXByb2R1Y3QtYWN0aW9ucyc7XG5pbXBvcnQgeyB1c2VJMThuIH0gZnJvbSAndnVlLWkxOG4nO1xuaW1wb3J0IFByb2R1Y3RUaXRsZSBmcm9tICcuLi9wcm9kdWN0L1Byb2R1Y3RUaXRsZS52dWUnO1xuaW1wb3J0IFByb2R1Y3RJbWFnZSBmcm9tICcuLi9wcm9kdWN0L1Byb2R1Y3RJbWFnZS52dWUnO1xuaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tICd2dWUnO1xuaW1wb3J0IHsgdXNlRG9jdW1lbnRTdG9yZSB9IGZyb20gJy4uLy4uL3N0b3Jlcy9kb2N1bWVudHMnO1xuaW1wb3J0IHsgc3RvcmVUb1JlZnMgfSBmcm9tICdwaW5pYSc7XG5pbXBvcnQgeyBleHBpcnlDaGVjayB9IGZyb20gJy4uLy4uL3V0aWxzL3RpbWVzdGFtcENoZWNrZXInO1xuY29uc3QgeyB0IH0gPSB1c2VJMThuKCk7XG5cbnR5cGUgQXVnbWVudGVkRE9DVU1FTlQgPSBET0NVTUVOVCAmIHsgcHJvZHVjdElkPzogc3RyaW5nIH07XG5jb25zdCBwcm9wcyA9IGRlZmluZVByb3BzPHtcbiAgcHJvZHVjdDogSU9mZmxpbmVQcm9kdWN0RGF0YTtcbiAgZG9jdW1lbnRzOiBBdWdtZW50ZWRET0NVTUVOVFtdO1xuICBpbmRleDogbnVtYmVyO1xuICB1c2VTZWxlY3Rpb24/OiBib29sZWFuO1xufT4oKTtcblxuY29uc3QgbW9kZWwgPSBkZWZpbmVNb2RlbDxib29sZWFuPih7IGRlZmF1bHQ6IGZhbHNlIH0pO1xuY29uc3QgZW1pdCA9IGRlZmluZUVtaXRzKFsnZ28nLCAndXBkYXRlJywgJ2RlbGV0ZSddKTtcblxuY29uc3QgZG9jdW1lbnRTdG9yZSA9IHVzZURvY3VtZW50U3RvcmUoKTtcbmNvbnN0IHsgZG9jdW1lbnRzSW5Eb3dubG9hZFF1ZXVlIH0gPSBzdG9yZVRvUmVmcyhkb2N1bWVudFN0b3JlKTtcblxuY29uc3QgZG9jdW1lbnRJZHMgPSBjb21wdXRlZCgoKSA9PiB7XG4gIHJldHVybiBwcm9wcy5kb2N1bWVudHMubWFwKChkb2MpID0+IGRvYy5faWQpO1xufSk7XG5cbmNvbnN0IGV4cGlyZWREb2N1bWVudHMgPSBjb21wdXRlZCgoKSA9PiB7XG4gIHJldHVybiBwcm9wcy5kb2N1bWVudHMubWFwKChkb2M6IEF1Z21lbnRlZERPQ1VNRU5UKSA9PiB7XG4gICAgY29uc3QgbGFzdFN5bmNlZEF0ID0gZG9jLmxhc3RTeW5jZWRBdFxuICAgICAgPyBOdW1iZXIoZG9jLmxhc3RTeW5jZWRBdClcbiAgICAgIDogRGF0ZS5ub3coKTtcbiAgICByZXR1cm4gZXhwaXJ5Q2hlY2sobGFzdFN5bmNlZEF0KTtcbiAgfSk7XG59KTtcblxuY29uc3QgZG9jdW1lbnRTdGF0dXNlcyA9IGNvbXB1dGVkKCgpID0+IHtcbiAgcmV0dXJuIGRvY3VtZW50c0luRG93bmxvYWRRdWV1ZS52YWx1ZS5maWx0ZXIoKGRvYykgPT5cbiAgICBkb2N1bWVudElkcy52YWx1ZS5pbmNsdWRlcyhkb2MuaWQpXG4gICk7XG59KTtcbjwvc2NyaXB0PlxuIiwiPHRlbXBsYXRlPlxuICA8ZGl2IGNsYXNzPVwicm93IHEtY29sLWd1dHRlci1zbVwiPlxuICAgIDwhLS0gU2VjdGlvbiBwZXIgc3luY2VkIHByb2R1Y3QgLS0+XG4gICAgPGRpdlxuICAgICAgdi1mb3I9XCIocHJvZHVjdCwgaW5kZXgpIG9mIHByb2R1Y3RzXCJcbiAgICAgIDprZXk9XCJwcm9kdWN0LnByb2R1Y3QuX2lkIHx8IGluZGV4XCJcbiAgICAgIGNsYXNzPVwiY29sLXhzLTEyIGNvbC0zLW1kXCJcbiAgICA+XG4gICAgICA8T2ZmbGluZVByb2R1Y3RJdGVtXG4gICAgICAgIHYtaWY9XCJtb2RlbFtpbmRleF1cIlxuICAgICAgICB2LW1vZGVsPVwibW9kZWxbaW5kZXhdLmNoZWNrZWRcIlxuICAgICAgICA6dXNlLXNlbGVjdGlvbj1cInVzZVNlbGVjdGlvblwiXG4gICAgICAgIDpkb2N1bWVudHM9XCJkb2N1bWVudHNcIlxuICAgICAgICA6cHJvZHVjdD1cInByb2R1Y3RcIlxuICAgICAgICA6aW5kZXg9XCJpbmRleFwiXG4gICAgICAgIEB1cGRhdGU9XCJvblVwZGF0ZVNpbmdsZVwiXG4gICAgICAgIEBkZWxldGU9XCJvbkRlbGV0ZVNpbmdsZVwiXG4gICAgICAgIEBnbz1cImdvVG9Eb2N1bWVudFwiXG4gICAgICAvPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQgbGFuZz1cInRzXCIgc2V0dXA+XG5pbXBvcnQgeyBET0NVTUVOVCB9IGZyb20gJy4uLy4uL0B0eXBlcy9kb2N1bWVudCc7XG5pbXBvcnQgeyBJT2ZmbGluZVByb2R1Y3REYXRhIH0gZnJvbSAnLi4vLi4vc3FsaXRlLWRhdGFiYXNlL29mZmxpbmUtcHJvZHVjdC1hY3Rpb25zJztcbmltcG9ydCBPZmZsaW5lUHJvZHVjdEl0ZW0gZnJvbSAnLi9PZmZsaW5lUHJvZHVjdEl0ZW0udnVlJztcbmltcG9ydCB7IElEb2NTZWxlY3Rpb24gfSBmcm9tICcuLi8uLi9wYWdlcy9kb2N1bWVudHMvT2ZmbGluZURvY3VtZW50c0xpc3RQYWdlLnZ1ZSc7XG5pbXBvcnQgeyB1c2VJMThuIH0gZnJvbSAndnVlLWkxOG4nO1xuaW1wb3J0IHsgcG9wRGlhbG9nIH0gZnJvbSAnLi4vLi4vdXRpbHMvZGlhbG9ncyc7XG5pbXBvcnQgeyB1c2VEb2N1bWVudFN0b3JlIH0gZnJvbSAnLi4vLi4vc3RvcmVzL2RvY3VtZW50cyc7XG5pbXBvcnQgeyB1c2VPZmZsaW5lRG9jdW1lbnRBY3Rpb25zIH0gZnJvbSAnLi4vLi4vc3FsaXRlLWRhdGFiYXNlL3VzZS1vZmZsaW5lLWRvY3VtZW50LWFjdGlvbnMnO1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAndnVlLXJvdXRlcic7XG5pbXBvcnQgeyBwb3BUb2FzdCB9IGZyb20gJ3NyYy91dGlscy90b2FzdHMnO1xuXG50eXBlIEF1Z21lbnRlZERPQ1VNRU5UID0gRE9DVU1FTlQgJiB7IHByb2R1Y3RJZD86IHN0cmluZyB9O1xuXG5jb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcblxuY29uc3QgcHJvcHMgPSBkZWZpbmVQcm9wczx7XG4gIHByb2R1Y3RzOiBJT2ZmbGluZVByb2R1Y3REYXRhW107XG4gIGRvY3VtZW50czogQXVnbWVudGVkRE9DVU1FTlRbXTtcbiAgdXNlU2VsZWN0aW9uPzogYm9vbGVhbjtcbn0+KCk7XG5cbmNvbnN0IGVtaXQgPSBkZWZpbmVFbWl0cyhbJ3JlbG9hZFJlcXVlc3QnXSk7XG5jb25zdCBtb2RlbCA9IGRlZmluZU1vZGVsPElEb2NTZWxlY3Rpb25bXT4oeyBkZWZhdWx0OiBbXSB9KTtcblxuY29uc3QgZG9jdW1lbnRTdG9yZSA9IHVzZURvY3VtZW50U3RvcmUoKTtcbmNvbnN0IHsgYWRkRG9jVG9Eb3dubG9hZFF1ZXVlIH0gPSBkb2N1bWVudFN0b3JlO1xuY29uc3Qgb2ZmbGluZURvY3VtZW50QWN0aW9ucyA9IHVzZU9mZmxpbmVEb2N1bWVudEFjdGlvbnMoKTtcbmNvbnN0IHsgZGVsZXRlT2ZmbGluZURvY3VtZW50RGF0YUJ5SWQgfSA9IG9mZmxpbmVEb2N1bWVudEFjdGlvbnM7XG5jb25zdCBvblVwZGF0ZVNpbmdsZSA9IGFzeW5jIChpZDogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IGRvYyA9IHByb3BzLmRvY3VtZW50cy5maW5kKChvZmZsaW5lRG9jKSA9PiBvZmZsaW5lRG9jLl9pZCA9PT0gaWQpO1xuICBpZiAoZG9jICYmIGRvYy5wcm9kdWN0SWQpIHtcbiAgICBhd2FpdCBhZGREb2NUb0Rvd25sb2FkUXVldWUoZG9jLl9pZCwgZG9jLnRpdGxlLCBkb2MucHJvZHVjdElkLCB0cnVlKTtcbiAgfVxufTtcbmNvbnN0IG9uRGVsZXRlU2luZ2xlID0gYXN5bmMgKGlkOiBzdHJpbmcpID0+IHtcbiAgcG9wRGlhbG9nKHtcbiAgICB0aXRsZTogdCgnZG9jdW1lbnRzLm9mZmxpbmUuZGVsZXRlLnRpdGxlJyksXG4gICAgbWVzc2FnZTogdCgnZG9jdW1lbnRzLm9mZmxpbmUuZGVsZXRlLm1lc3NhZ2UnKSxcbiAgICBzdWJtaXQ6IHQoJ2J1dHRvbnMuZGVsZXRlJyksXG4gICAgY2FuY2VsOiB0KCdidXR0b25zLmNhbmNlbCcpLFxuICB9KS5vbk9rKGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBkZWxldGVPZmZsaW5lRG9jdW1lbnREYXRhQnlJZChpZCk7XG4gICAgYXdhaXQgZW1pdCgncmVsb2FkUmVxdWVzdCcpO1xuICB9KTtcbn07XG5cbmNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuY29uc3QgZ29Ub0RvY3VtZW50ID0gKGRvYzogRE9DVU1FTlQsIGlzRXhwaXJlZDogYm9vbGVhbikgPT4ge1xuICBpZiAoaXNFeHBpcmVkKSB7XG4gICAgcG9wVG9hc3Qoe1xuICAgICAgdHlwZTogJ25lZ2F0aXZlJyxcbiAgICAgIG1lc3NhZ2U6IHQoJ2Vycm9ycy5kb2N1bWVudEV4cGlyZWQnKSxcbiAgICB9KTtcbiAgICByZXR1cm47XG4gIH1cblxuICByb3V0ZXIucHVzaChgL2RvY3VtZW50LyR7ZG9jLl9pZH0/b2ZmbGluZT10cnVlYCk7XG59O1xuPC9zY3JpcHQ+XG4iXSwibmFtZXMiOlsidCIsInVzZUkxOG4iLCJwcm9wcyIsIl9fcHJvcHMiLCJtb2RlbCIsIl91c2VNb2RlbCIsImVtaXQiLCJfX2VtaXQiLCJkb2N1bWVudFN0b3JlIiwidXNlRG9jdW1lbnRTdG9yZSIsImRvY3VtZW50c0luRG93bmxvYWRRdWV1ZSIsInN0b3JlVG9SZWZzIiwiZG9jdW1lbnRJZHMiLCJjb21wdXRlZCIsImRvYyIsImV4cGlyZWREb2N1bWVudHMiLCJsYXN0U3luY2VkQXQiLCJleHBpcnlDaGVjayIsImRvY3VtZW50U3RhdHVzZXMiLCJhZGREb2NUb0Rvd25sb2FkUXVldWUiLCJvZmZsaW5lRG9jdW1lbnRBY3Rpb25zIiwidXNlT2ZmbGluZURvY3VtZW50QWN0aW9ucyIsImRlbGV0ZU9mZmxpbmVEb2N1bWVudERhdGFCeUlkIiwib25VcGRhdGVTaW5nbGUiLCJpZCIsIm9mZmxpbmVEb2MiLCJvbkRlbGV0ZVNpbmdsZSIsInBvcERpYWxvZyIsInJvdXRlciIsInVzZVJvdXRlciIsImdvVG9Eb2N1bWVudCIsImlzRXhwaXJlZCIsInBvcFRvYXN0Il0sIm1hcHBpbmdzIjoiMnlCQXdJTSxLQUFBLENBQUUsRUFBQUEsR0FBTUMsSUFHUkMsRUFBUUMsRUFPUkMsRUFBUUMsRUFBb0JGLEVBQW1CLFlBQUEsRUFDL0NHLEVBQU9DLEVBRVBDLEVBQWdCQyxJQUNoQixDQUFFLHlCQUFBQyxDQUFBLEVBQTZCQyxFQUFZSCxDQUFhLEVBRXhESSxFQUFjQyxFQUFTLElBQ3BCWCxFQUFNLFVBQVUsSUFBS1ksR0FBUUEsRUFBSSxHQUFHLENBQzVDLEVBRUtDLEVBQW1CRixFQUFTLElBQ3pCWCxFQUFNLFVBQVUsSUFBS1ksR0FBMkIsQ0FDL0MsTUFBQUUsRUFBZUYsRUFBSSxhQUNyQixPQUFPQSxFQUFJLFlBQVksRUFDdkIsS0FBSyxNQUNULE9BQU9HLEdBQVlELENBQVksQ0FBQSxDQUNoQyxDQUNGLEVBRUtFLEVBQW1CTCxFQUFTLElBQ3pCSCxFQUF5QixNQUFNLE9BQVFJLEdBQzVDRixFQUFZLE1BQU0sU0FBU0UsRUFBSSxFQUFFLENBQUEsQ0FFcEMsbzZGQ3BJSyxLQUFBLENBQUUsRUFBQWQsR0FBTUMsSUFFUkMsRUFBUUMsRUFNUkcsRUFBT0MsRUFDUEgsRUFBUUMsRUFBNEJGLEVBQWdCLFlBQUEsRUFFcERLLEVBQWdCQyxJQUNoQixDQUFFLHNCQUFBVSxDQUEwQixFQUFBWCxFQUM1QlksRUFBeUJDLEtBQ3pCLENBQUUsOEJBQUFDLENBQWtDLEVBQUFGLEVBQ3BDRyxFQUFpQixNQUFPQyxHQUFlLENBQ3JDLE1BQUFWLEVBQU1aLEVBQU0sVUFBVSxLQUFNdUIsR0FBZUEsRUFBVyxNQUFRRCxDQUFFLEVBQ2xFVixHQUFPQSxFQUFJLFdBQ2IsTUFBTUssRUFBc0JMLEVBQUksSUFBS0EsRUFBSSxNQUFPQSxFQUFJLFVBQVcsRUFBSSxDQUNyRSxFQUVJWSxFQUFpQixNQUFPRixHQUFlLENBQ2pDRyxHQUFBLENBQ1IsTUFBTzNCLEVBQUUsZ0NBQWdDLEVBQ3pDLFFBQVNBLEVBQUUsa0NBQWtDLEVBQzdDLE9BQVFBLEVBQUUsZ0JBQWdCLEVBQzFCLE9BQVFBLEVBQUUsZ0JBQWdCLENBQUEsQ0FDM0IsRUFBRSxLQUFLLFNBQVksQ0FDbEIsTUFBTXNCLEVBQThCRSxDQUFFLEVBQ3RDLE1BQU1sQixFQUFLLGVBQWUsQ0FBQSxDQUMzQixDQUFBLEVBR0dzQixFQUFTQyxLQUNUQyxFQUFlLENBQUNoQixFQUFlaUIsSUFBdUIsQ0FDMUQsR0FBSUEsRUFBVyxDQUNKQyxHQUFBLENBQ1AsS0FBTSxXQUNOLFFBQVNoQyxFQUFFLHdCQUF3QixDQUFBLENBQ3BDLEVBQ0QsTUFDRixDQUVPNEIsRUFBQSxLQUFLLGFBQWFkLEVBQUksa0JBQWtCLENBQUEifQ==
