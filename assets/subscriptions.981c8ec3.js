import{bP as h,an as l,u as g,r as u,aV as s,bC as e,bE as w}from"./index.6def9867.js";const T=h("subscriptions",()=>{const{t:c}=l(),i=g(),n=u({}),p=async r=>{try{const{data:t}=await s.post("/subscriptions",r);return t}catch(t){e(t,!0,c("errors.subscriptionCreationFailed"))}},b=async r=>{try{const{data:t}=await s.get(`/subscriptions/${r}`);n.value=t}catch(t){e(t,!0,c("errors.subscriptionFetchFailed"))}},d=async r=>{try{const{data:t}=await s.patch(`/subscriptions/${r._id}`,r);return t}catch(t){e(t,!0,c("errors.subscriptionUpdateFailed"))}},y=async r=>{try{const{assignedTo:t,_id:a}=r;await s.patch("/subscriptions/own-subscription",{assignedTo:t,_id:a}),i.getAuth()}catch(t){e(t,!0,c("errors.subscriptionUpdateFailed"))}},S=async r=>{try{await s.patch("/subscriptions/change-vin",r),i.getAuth()}catch(t){e(t,!0,c("errors.subscriptionUpdateFailed"))}},o=u([]);return{createSubscription:p,getSubscription:b,viewedSubscription:n,updateSubscription:d,updateOwnSubscription:y,updateSubscriptionSerial:S,userSubscriptions:o,getSubscriptionsByUserId:async r=>{try{const{data:t}=await s.get(`/subscriptions/user-subscriptions/${r}`);return o.value=t,t}catch(t){e(t,!0,c("errors.subscriptionFetchFailed"))}},cancelAndRefund:async(r,t)=>{try{await s.get(`/subscriptions/${r}/cancel`,{params:{refund:t}}),i.getAuth()}catch(a){e(a,!0)}},refundSubscription:async r=>{try{await s.post("/payments/payment-refund",r)}catch(t){e(t,!0,c("errors.failedToRefundPayment"))}},requestAccessToOrgSubscription:async()=>{try{await s.post("/subscriptions/request-access"),w("positive")}catch(r){e(r,!0)}}}});export{T as u};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3Vic2NyaXB0aW9ucy45ODFjOGVjMy5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3N0b3Jlcy9zdWJzY3JpcHRpb25zLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlZmluZVN0b3JlIH0gZnJvbSAncGluaWEnO1xuaW1wb3J0IHsgUE9QVUxBVEVEX1NVQlNDUklQVElPTiwgU1VCU0NSSVBUSU9OIH0gZnJvbSAnc3JjL0B0eXBlcy9zdWJzY3JpcHRpb24nO1xuaW1wb3J0IHsgcm9jdW1lbnRzQXBpIH0gZnJvbSAnc3JjL2Jvb3QvYXhpb3MnO1xuaW1wb3J0IGFwaUVycm9ySGFuZGxlciBmcm9tICdzcmMvdXRpbHMvZXhjZXB0aW9ucy9hcGktZXJyb3ItaGFuZGxlcic7XG5pbXBvcnQgeyByZWYgfSBmcm9tICd2dWUnO1xuaW1wb3J0IHsgdXNlSTE4biB9IGZyb20gJ3Z1ZS1pMThuJztcbmltcG9ydCB7IHVzZUNvcmVTdG9yZSB9IGZyb20gJy4vY29yZS1zdG9yZSc7XG5pbXBvcnQgeyBwb3BUb2FzdCB9IGZyb20gJ3NyYy91dGlscy90b2FzdHMnO1xuXG5leHBvcnQgY29uc3QgdXNlU3Vic2NyaXB0aW9uc1N0b3JlID0gZGVmaW5lU3RvcmUoJ3N1YnNjcmlwdGlvbnMnLCAoKSA9PiB7XG4gIGNvbnN0IHsgdCB9ID0gdXNlSTE4bigpO1xuICBjb25zdCBjb3JlU3RvcmUgPSB1c2VDb3JlU3RvcmUoKTtcblxuICBjb25zdCB2aWV3ZWRTdWJzY3JpcHRpb24gPSByZWY8UGFydGlhbDxQT1BVTEFURURfU1VCU0NSSVBUSU9OPj4oe30pO1xuICBjb25zdCBjcmVhdGVTdWJzY3JpcHRpb24gPSBhc3luYyAoc3Vic2NyaXB0aW9uOiBQYXJ0aWFsPFNVQlNDUklQVElPTj4pID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCByb2N1bWVudHNBcGkucG9zdDxTVUJTQ1JJUFRJT04+KFxuICAgICAgICAnL3N1YnNjcmlwdGlvbnMnLFxuICAgICAgICBzdWJzY3JpcHRpb25cbiAgICAgICk7XG5cbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhcGlFcnJvckhhbmRsZXIoZXJyb3IsIHRydWUsIHQoJ2Vycm9ycy5zdWJzY3JpcHRpb25DcmVhdGlvbkZhaWxlZCcpKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgZ2V0U3Vic2NyaXB0aW9uID0gYXN5bmMgKHN1YnNjcmlwdGlvbklkOiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCByb2N1bWVudHNBcGkuZ2V0PFBPUFVMQVRFRF9TVUJTQ1JJUFRJT04+KFxuICAgICAgICBgL3N1YnNjcmlwdGlvbnMvJHtzdWJzY3JpcHRpb25JZH1gXG4gICAgICApO1xuICAgICAgdmlld2VkU3Vic2NyaXB0aW9uLnZhbHVlID0gZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYXBpRXJyb3JIYW5kbGVyKGVycm9yLCB0cnVlLCB0KCdlcnJvcnMuc3Vic2NyaXB0aW9uRmV0Y2hGYWlsZWQnKSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHVwZGF0ZVN1YnNjcmlwdGlvbiA9IGFzeW5jICh1cGRhdGVzOiBQYXJ0aWFsPFNVQlNDUklQVElPTj4pID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCByb2N1bWVudHNBcGkucGF0Y2g8U1VCU0NSSVBUSU9OPihcbiAgICAgICAgYC9zdWJzY3JpcHRpb25zLyR7dXBkYXRlcy5faWR9YCxcbiAgICAgICAgdXBkYXRlc1xuICAgICAgKTtcblxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGFwaUVycm9ySGFuZGxlcihlcnJvciwgdHJ1ZSwgdCgnZXJyb3JzLnN1YnNjcmlwdGlvblVwZGF0ZUZhaWxlZCcpKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgdXBkYXRlT3duU3Vic2NyaXB0aW9uID0gYXN5bmMgKHVwZGF0ZXM6IFBhcnRpYWw8U1VCU0NSSVBUSU9OPikgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGFzc2lnbmVkVG8sIF9pZCB9ID0gdXBkYXRlcztcbiAgICAgIGF3YWl0IHJvY3VtZW50c0FwaS5wYXRjaDxTVUJTQ1JJUFRJT04+KFxuICAgICAgICAnL3N1YnNjcmlwdGlvbnMvb3duLXN1YnNjcmlwdGlvbicsXG4gICAgICAgIHsgYXNzaWduZWRUbywgX2lkIH1cbiAgICAgICk7XG4gICAgICBjb3JlU3RvcmUuZ2V0QXV0aCgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhcGlFcnJvckhhbmRsZXIoZXJyb3IsIHRydWUsIHQoJ2Vycm9ycy5zdWJzY3JpcHRpb25VcGRhdGVGYWlsZWQnKSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHVwZGF0ZVN1YnNjcmlwdGlvblNlcmlhbCA9IGFzeW5jICh1cGRhdGVzOiBQYXJ0aWFsPFNVQlNDUklQVElPTj4pID0+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgcm9jdW1lbnRzQXBpLnBhdGNoPFNVQlNDUklQVElPTj4oXG4gICAgICAgICcvc3Vic2NyaXB0aW9ucy9jaGFuZ2UtdmluJyxcbiAgICAgICAgdXBkYXRlc1xuICAgICAgKTtcbiAgICAgIGNvcmVTdG9yZS5nZXRBdXRoKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGFwaUVycm9ySGFuZGxlcihlcnJvciwgdHJ1ZSwgdCgnZXJyb3JzLnN1YnNjcmlwdGlvblVwZGF0ZUZhaWxlZCcpKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgdXNlclN1YnNjcmlwdGlvbnMgPSByZWY8U1VCU0NSSVBUSU9OW10+KFtdKTtcbiAgY29uc3QgZ2V0U3Vic2NyaXB0aW9uc0J5VXNlcklkID0gYXN5bmMgKF9pZDogc3RyaW5nKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgcm9jdW1lbnRzQXBpLmdldDxTVUJTQ1JJUFRJT05bXT4oXG4gICAgICAgIGAvc3Vic2NyaXB0aW9ucy91c2VyLXN1YnNjcmlwdGlvbnMvJHtfaWR9YFxuICAgICAgKTtcbiAgICAgIHVzZXJTdWJzY3JpcHRpb25zLnZhbHVlID0gZGF0YTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhcGlFcnJvckhhbmRsZXIoZXJyb3IsIHRydWUsIHQoJ2Vycm9ycy5zdWJzY3JpcHRpb25GZXRjaEZhaWxlZCcpKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY2FuY2VsQW5kUmVmdW5kID0gYXN5bmMgKHN1YnNjcmlwdGlvbklkOiBzdHJpbmcsIHJlZnVuZD86IGJvb2xlYW4pID0+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgcm9jdW1lbnRzQXBpLmdldDxTVUJTQ1JJUFRJT04+KFxuICAgICAgICBgL3N1YnNjcmlwdGlvbnMvJHtzdWJzY3JpcHRpb25JZH0vY2FuY2VsYCxcbiAgICAgICAgeyBwYXJhbXM6IHsgcmVmdW5kIH0gfVxuICAgICAgKTtcbiAgICAgIGNvcmVTdG9yZS5nZXRBdXRoKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGFwaUVycm9ySGFuZGxlcihlcnJvciwgdHJ1ZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHJlZnVuZFN1YnNjcmlwdGlvbiA9IGFzeW5jIChkYXRhOiB7XG4gICAgcmVmdW5kPzogYm9vbGVhbjtcbiAgICBwYXltZW50SW50ZW50SWQ6IHN0cmluZztcbiAgICBjcmVhdGVkQnk6IHN0cmluZztcbiAgfSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCByb2N1bWVudHNBcGkucG9zdCgnL3BheW1lbnRzL3BheW1lbnQtcmVmdW5kJywgZGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBhcGlFcnJvckhhbmRsZXIoZXJyLCB0cnVlLCB0KCdlcnJvcnMuZmFpbGVkVG9SZWZ1bmRQYXltZW50JykpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCByZXF1ZXN0QWNjZXNzVG9PcmdTdWJzY3JpcHRpb24gPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHJvY3VtZW50c0FwaS5wb3N0KCcvc3Vic2NyaXB0aW9ucy9yZXF1ZXN0LWFjY2VzcycpO1xuICAgICAgcG9wVG9hc3QoJ3Bvc2l0aXZlJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGFwaUVycm9ySGFuZGxlcihlcnJvciwgdHJ1ZSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgY3JlYXRlU3Vic2NyaXB0aW9uLFxuICAgIGdldFN1YnNjcmlwdGlvbixcbiAgICB2aWV3ZWRTdWJzY3JpcHRpb24sXG4gICAgdXBkYXRlU3Vic2NyaXB0aW9uLFxuICAgIHVwZGF0ZU93blN1YnNjcmlwdGlvbixcbiAgICB1cGRhdGVTdWJzY3JpcHRpb25TZXJpYWwsXG4gICAgdXNlclN1YnNjcmlwdGlvbnMsXG4gICAgZ2V0U3Vic2NyaXB0aW9uc0J5VXNlcklkLFxuICAgIGNhbmNlbEFuZFJlZnVuZCxcbiAgICByZWZ1bmRTdWJzY3JpcHRpb24sXG4gICAgcmVxdWVzdEFjY2Vzc1RvT3JnU3Vic2NyaXB0aW9uLFxuICB9O1xufSk7XG4iXSwibmFtZXMiOlsidXNlU3Vic2NyaXB0aW9uc1N0b3JlIiwiZGVmaW5lU3RvcmUiLCJ0IiwidXNlSTE4biIsImNvcmVTdG9yZSIsInVzZUNvcmVTdG9yZSIsInZpZXdlZFN1YnNjcmlwdGlvbiIsInJlZiIsImNyZWF0ZVN1YnNjcmlwdGlvbiIsInN1YnNjcmlwdGlvbiIsImRhdGEiLCJyb2N1bWVudHNBcGkiLCJlcnJvciIsImFwaUVycm9ySGFuZGxlciIsImdldFN1YnNjcmlwdGlvbiIsInN1YnNjcmlwdGlvbklkIiwidXBkYXRlU3Vic2NyaXB0aW9uIiwidXBkYXRlcyIsInVwZGF0ZU93blN1YnNjcmlwdGlvbiIsImFzc2lnbmVkVG8iLCJfaWQiLCJ1cGRhdGVTdWJzY3JpcHRpb25TZXJpYWwiLCJ1c2Vy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
