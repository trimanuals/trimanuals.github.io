import{bO as u,bP as S,r as c,an as O,aV as n,by as J,bC as o,bE as N,bQ as l}from"./index.6def9867.js";const T=async e=>{let s={};const t={_id:e._id,systemTitle:JSON.stringify(e.systemTitle),title:JSON.stringify(e.title),icon:JSON.stringify(e.icon),colour:JSON.stringify(e.colour),active:JSON.stringify(e.active),avatar:JSON.stringify(e.avatar),useImage:JSON.stringify(e.useImage),createdAt:JSON.stringify(e.createdAt),updatedAt:JSON.stringify(e.updatedAt)};return s=await u.upsert(t,{conflictPaths:["_id"]}),s},A=async()=>await(await u.find()).map(t=>({_id:t._id,systemTitle:JSON.parse(t.systemTitle),title:JSON.parse(t.title),icon:JSON.parse(t.icon),colour:JSON.parse(t.colour),active:JSON.parse(t.active),avatar:JSON.parse(t.avatar),useImage:JSON.parse(t.useImage),createdAt:JSON.parse(t.createdAt),updatedAt:JSON.parse(t.updatedAt)})),b=S("metadata",()=>{const e=c([]),s=c(null),{t}=O(),i=async()=>{try{const{data:r}=await n.get("/metadata");e.value=r,J()&&e.value.forEach(async a=>{await T(a)});return}catch(r){const a=await A();if(a)return a;o(r,!0,t("errors.failedToLoadArg",[t("entityTypes.metadata")]))}};return{metadata:e,editMeta:s,getAllMetadataTypes:i,getSingleMetadataType:async r=>{try{const{data:a}=await n.get(`/metadata/${r}`);s.value=a;return}catch(a){o(a,!0,t("errors.failedToLoadArg",[t("entityTypes.metadata")]))}},updateSingleMetadataType:async r=>{const{_id:a,title:p,icon:y,colour:d,useImage:g}=r;try{return await n.patch(`/metadata/${a}`,{title:p,icon:y,colour:d,useImage:g}),N("positive"),await i()}catch(f){o(f,!0,l.global.t("errors.failedToLoadArg",[l.global.t("entityTypes.metadata")]))}}}});export{b as u};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWV0YWRhdGEuNzkzNGIzYzkuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zcWxpdGUtZGF0YWJhc2Uvb2ZmbGluZS1tZXRhZGF0YS1hY3Rpb25zLnRzIiwiLi4vLi4vLi4vc3JjL3N0b3Jlcy9tZXRhZGF0YS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNRVRBREFUVU0gfSBmcm9tICdzcmMvQHR5cGVzL21ldGFkYXRhJztcbmltcG9ydCB7IE1ldGFkYXRhIH0gZnJvbSAnLi9lbnRpdGllcy9tZXRhZGF0YSc7XG5cbmV4cG9ydCBjb25zdCB1cHNlcnRPZmZsaW5lTWV0YWRhdGEgPSBhc3luYyAobWV0YWRhdGE6IE1FVEFEQVRVTSkgPT4ge1xuICBsZXQgcmVzID0ge307XG4gIGNvbnN0IHVwc2VydERvYyA9IHtcbiAgICBfaWQ6IG1ldGFkYXRhLl9pZCxcbiAgICBzeXN0ZW1UaXRsZTogSlNPTi5zdHJpbmdpZnkobWV0YWRhdGEuc3lzdGVtVGl0bGUpLFxuICAgIHRpdGxlOiBKU09OLnN0cmluZ2lmeShtZXRhZGF0YS50aXRsZSksXG4gICAgaWNvbjogSlNPTi5zdHJpbmdpZnkobWV0YWRhdGEuaWNvbiksXG4gICAgY29sb3VyOiBKU09OLnN0cmluZ2lmeShtZXRhZGF0YS5jb2xvdXIpLFxuICAgIGFjdGl2ZTogSlNPTi5zdHJpbmdpZnkobWV0YWRhdGEuYWN0aXZlKSxcbiAgICBhdmF0YXI6IEpTT04uc3RyaW5naWZ5KG1ldGFkYXRhLmF2YXRhciksXG4gICAgdXNlSW1hZ2U6IEpTT04uc3RyaW5naWZ5KG1ldGFkYXRhLnVzZUltYWdlKSxcbiAgICBjcmVhdGVkQXQ6IEpTT04uc3RyaW5naWZ5KG1ldGFkYXRhLmNyZWF0ZWRBdCksXG4gICAgdXBkYXRlZEF0OiBKU09OLnN0cmluZ2lmeShtZXRhZGF0YS51cGRhdGVkQXQpLFxuICB9O1xuXG4gIHJlcyA9IGF3YWl0IE1ldGFkYXRhLnVwc2VydCh1cHNlcnREb2MsIHtcbiAgICBjb25mbGljdFBhdGhzOiBbJ19pZCddLFxuICB9KTtcblxuICByZXR1cm4gcmVzO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldEFsbE9mZmxpbmVNZXRhZGF0YVR5cGVzID0gYXN5bmMgKCkgPT4ge1xuICBjb25zdCByZXN1bHRzOiBhbnkgPSBhd2FpdCBNZXRhZGF0YS5maW5kKCk7XG5cbiAgY29uc3QgbmV3UmVzdWx0czogTUVUQURBVFVNW10gPSBhd2FpdCByZXN1bHRzLm1hcCgobWV0YWRhdGE6IGFueSkgPT4ge1xuICAgIGNvbnN0IHJlczogUGFydGlhbDxNRVRBREFUVU0+ID0ge1xuICAgICAgX2lkOiBtZXRhZGF0YS5faWQsXG4gICAgICBzeXN0ZW1UaXRsZTogSlNPTi5wYXJzZShtZXRhZGF0YS5zeXN0ZW1UaXRsZSksXG4gICAgICB0aXRsZTogSlNPTi5wYXJzZShtZXRhZGF0YS50aXRsZSksXG4gICAgICBpY29uOiBKU09OLnBhcnNlKG1ldGFkYXRhLmljb24pLFxuICAgICAgY29sb3VyOiBKU09OLnBhcnNlKG1ldGFkYXRhLmNvbG91ciksXG4gICAgICBhY3RpdmU6IEpTT04ucGFyc2UobWV0YWRhdGEuYWN0aXZlKSxcbiAgICAgIGF2YXRhcjogSlNPTi5wYXJzZShtZXRhZGF0YS5hdmF0YXIpLFxuICAgICAgdXNlSW1hZ2U6IEpTT04ucGFyc2UobWV0YWRhdGEudXNlSW1hZ2UpLFxuICAgICAgY3JlYXRlZEF0OiBKU09OLnBhcnNlKG1ldGFkYXRhLmNyZWF0ZWRBdCksXG4gICAgICB1cGRhdGVkQXQ6IEpTT04ucGFyc2UobWV0YWRhdGEudXBkYXRlZEF0KSxcbiAgICB9O1xuICAgIHJldHVybiByZXM7XG4gIH0pO1xuXG4gIHJldHVybiBuZXdSZXN1bHRzO1xufTtcbiIsImltcG9ydCB7IGRlZmluZVN0b3JlIH0gZnJvbSAncGluaWEnO1xuaW1wb3J0IHsgcm9jdW1lbnRzQXBpIH0gZnJvbSAnc3JjL2Jvb3QvYXhpb3MnO1xuaW1wb3J0IHsgcmVmIH0gZnJvbSAndnVlJztcbmltcG9ydCBhcGlFcnJvckhhbmRsZXIgZnJvbSAnLi4vdXRpbHMvZXhjZXB0aW9ucy9hcGktZXJyb3ItaGFuZGxlcic7XG5pbXBvcnQgeyBpMThuIH0gZnJvbSAnc3JjL2Jvb3QvaTE4bic7XG5pbXBvcnQgeyBNRVRBREFUVU0gfSBmcm9tICdzcmMvQHR5cGVzL21ldGFkYXRhJztcbmltcG9ydCB7IHBvcFRvYXN0IH0gZnJvbSAnc3JjL3V0aWxzL3RvYXN0cyc7XG5pbXBvcnQgeyB1c2VJMThuIH0gZnJvbSAndnVlLWkxOG4nO1xuaW1wb3J0IHtcbiAgZ2V0QWxsT2ZmbGluZU1ldGFkYXRhVHlwZXMsXG4gIHVwc2VydE9mZmxpbmVNZXRhZGF0YSxcbn0gZnJvbSAnc3JjL3NxbGl0ZS1kYXRhYmFzZS9vZmZsaW5lLW1ldGFkYXRhLWFjdGlvbnMnO1xuaW1wb3J0IGNoZWNrSXNNb2JpbGVBcHAgZnJvbSAnLi4vdXRpbHMvY2hlY2tJc01vYmlsZUFwcCc7XG5cbmV4cG9ydCBjb25zdCB1c2VNZXRhZGF0YVN0b3JlID0gZGVmaW5lU3RvcmUoJ21ldGFkYXRhJywgKCkgPT4ge1xuICBjb25zdCBtZXRhZGF0YSA9IHJlZjxNRVRBREFUVU1bXT4oW10pO1xuICBjb25zdCBlZGl0TWV0YSA9IHJlZjxNRVRBREFUVU0gfCBudWxsPihudWxsKTtcbiAgY29uc3QgeyB0IH0gPSB1c2VJMThuKCk7XG5cbiAgY29uc3QgZ2V0QWxsTWV0YWRhdGFUeXBlcyA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCByb2N1bWVudHNBcGkuZ2V0KCcvbWV0YWRhdGEnKTtcbiAgICAgIG1ldGFkYXRhLnZhbHVlID0gZGF0YTtcblxuICAgICAgY2hlY2tJc01vYmlsZUFwcCgpICYmXG4gICAgICAgIG1ldGFkYXRhLnZhbHVlLmZvckVhY2goYXN5bmMgKG1ldGFkYXR1bTogTUVUQURBVFVNKSA9PiB7XG4gICAgICAgICAgYXdhaXQgdXBzZXJ0T2ZmbGluZU1ldGFkYXRhKG1ldGFkYXR1bSk7XG4gICAgICAgIH0pO1xuXG4gICAgICByZXR1cm47XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IG9mZmxpbmVNZXRhZGF0YSA9IGF3YWl0IGdldEFsbE9mZmxpbmVNZXRhZGF0YVR5cGVzKCk7XG5cbiAgICAgIGlmIChvZmZsaW5lTWV0YWRhdGEpIHtcbiAgICAgICAgcmV0dXJuIG9mZmxpbmVNZXRhZGF0YTtcbiAgICAgIH1cblxuICAgICAgYXBpRXJyb3JIYW5kbGVyKFxuICAgICAgICBlcnJvcixcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgdCgnZXJyb3JzLmZhaWxlZFRvTG9hZEFyZycsIFt0KCdlbnRpdHlUeXBlcy5tZXRhZGF0YScpXSlcbiAgICAgICk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGdldFNpbmdsZU1ldGFkYXRhVHlwZSA9IGFzeW5jIChpZDogc3RyaW5nKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgcm9jdW1lbnRzQXBpLmdldChgL21ldGFkYXRhLyR7aWR9YCk7XG4gICAgICBlZGl0TWV0YS52YWx1ZSA9IGRhdGE7XG4gICAgICByZXR1cm47XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGFwaUVycm9ySGFuZGxlcihcbiAgICAgICAgZXJyb3IsXG4gICAgICAgIHRydWUsXG4gICAgICAgIHQoJ2Vycm9ycy5mYWlsZWRUb0xvYWRBcmcnLCBbdCgnZW50aXR5VHlwZXMubWV0YWRhdGEnKV0pXG4gICAgICApO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCB1cGRhdGVTaW5nbGVNZXRhZGF0YVR5cGUgPSBhc3luYyAocGF5bG9hZDogUGFydGlhbDxNRVRBREFUVU0+KSA9PiB7XG4gICAgY29uc3QgeyBfaWQsIHRpdGxlLCBpY29uLCBjb2xvdXIsIHVzZUltYWdlIH0gPSBwYXlsb2FkO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCByb2N1bWVudHNBcGkucGF0Y2goYC9tZXRhZGF0YS8ke19pZH1gLCB7XG4gICAgICAgIHRpdGxlLFxuICAgICAgICBpY29uLFxuICAgICAgICBjb2xvdXIsXG4gICAgICAgIHVzZUltYWdlLFxuICAgICAgfSk7XG4gICAgICBwb3BUb2FzdCgncG9zaXRpdmUnKTtcbiAgICAgIHJldHVybiBhd2FpdCBnZXRBbGxNZXRhZGF0YVR5cGVzKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGFwaUVycm9ySGFuZGxlcihcbiAgICAgICAgZXJyb3IsXG4gICAgICAgIHRydWUsXG4gICAgICAgIGkxOG4uZ2xvYmFsLnQoJ2Vycm9ycy5mYWlsZWRUb0xvYWRBcmcnLCBbXG4gICAgICAgICAgaTE4bi5nbG9iYWwudCgnZW50aXR5VHlwZXMubWV0YWRhdGEnKSxcbiAgICAgICAgXSlcbiAgICAgICk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgbWV0YWRhdGEsXG4gICAgZWRpdE1ldGEsXG4gICAgZ2V0QWxsTWV0YWRhdGFUeXBlcyxcbiAgICBnZXRTaW5nbGVNZXRhZGF0YVR5cGUsXG4gICAgdXBkYXRlU2luZ2xlTWV0YWRhdGFUeXBlLFxuICB9O1xufSk7XG4iXSwibmFtZXMiOlsidXBzZXJ0T2ZmbGluZU1ldGFkYXRhIiwibWV0YWRhdGEiLCJyZXMiLCJ1cHNlcnREb2MiLCJNZXRhZGF0YSIsImdldEFsbE9mZmxpbmVNZXRhZGF0YVR5cGVzIiwidXNlTWV0YWRhdGFTdG9yZSIsImRlZmluZVN0b3JlIiwicmVmIiwiZWRpdE1ldGEiLCJ1c2VJMThuIiwiZ2V0QWxsTWV0YWRhdGFUeXBlcyIsImRhdGEiLCJyb2N1bWVudHNBcGkiLCJjaGVja0lzTW9iaWxlQXBwIiwibWV0YWRhdHVtIiwiZXJyb3IiLCJvZmZsaW5lTWV0YWRhdGEiLCJhcGlFcnJvckhhbmRsZXIiLCJpZCIsInBheWxvYWQiLCJfaWQiLCJ0aXRsZSIsImljb24iLCJjb2xvdXIiLCJ1c2VJbWFnZSIsInBvcFRvYXN0IiwiaTE4biJdLCJtYXBwaW5ncyI6IndHQUdhLE1BQUFBLEVBQXdCLE1BQU9DLEdBQXdCLENBQ2xFLElB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
