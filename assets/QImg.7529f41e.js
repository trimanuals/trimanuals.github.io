import{n as l,f as E,r as s,aA as T,aB as H,ae as M,o as n,ah as A,aC as F,aD as O,N as P,aE as h,j as W}from"./index.6def9867.js";const x={ratio:[String,Number]};function G(e,o){return l(()=>{const u=Number(e.ratio||(o!==void 0?o.value:void 0));return isNaN(u)!==!0&&u>0?{paddingBottom:`${100/u}%`}:null})}const J=1.7778;var U=E({name:"QImg",props:{...x,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:J},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:o,emit:u}){const y=s(e.initialRatio),_=G(e,y),m=W(),{registerTimeout:C,removeTimeout:v}=T(),{registerTimeout:N,removeTimeout:b}=T(),f=l(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),z=l(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),t=[s(null),s(f.value)],a=s(0),c=s(!1),g=s(!1),L=l(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),k=l(()=>({width:e.width,height:e.height})),I=l(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),R=l(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function B(){if(b(),e.loadingShowDelay===0){c.value=!0;return}N(()=>{c.value=!0},e.loadingShowDelay)}function S(){b(),c.value=!1}function j({target:i}){h(m)===!1&&(v(),y.value=i.naturalHeight===0?.5:i.naturalWidth/i.naturalHeight,w(i,1))}function w(i,r){r===1e3||h(m)===!0||(i.complete===!0?D(i):C(()=>{w(i,r+1)},50))}function D(i){h(m)!==!0&&(a.value=a.value^1,t[a.value].value=null,S(),i.getAttribute("__qerror")!=="true"&&(g.value=!1),u("load",i.currentSrc||i.src))}function Q(i){v(),S(),g.value=!0,t[a.value].value=z.value,t[a.value^1].value=f.value,u("error",i)}function q(i){const r=t[i].value,d={key:"img_"+i,class:I.value,style:R.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...r};return a.value===i?Object.assign(d,{class:d.class+"current",onLoad:j,onError:Q}):d.class+="loaded",n("div",{class:"q-img__container absolute-full",key:"img"+i},n("img",d))}function $(){return c.value===!1?n("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},F(o[g.value===!0?"error":"default"])):n("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},o.loading!==void 0?o.loading():e.noSpinner===!0?void 0:[n(O,{color:e.spinnerColor,size:e.spinnerSize})])}{let i=function(){P(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,r=>{v(),g.value=!1,r===null?(S(),t[a.value^1].value=f.value):B(),t[a.value].value=r},{immediate:!0})};H.value===!0?M(i):i()}return()=>{const i=[];return _.value!==null&&i.push(n("div",{key:"filler",style:_.value})),t[0].value!==null&&i.push(q(0)),t[1].value!==null&&i.push(q(1)),i.push(n(A,{name:"q-transition--fade"},$)),n("div",{key:"main",class:L.value,style:k.value,role:"img","aria-label":e.alt},i)}}});export{U as Q};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUUltZy43NTI5ZjQxZS5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9zYWJsZXMvcHJpdmF0ZS51c2UtcmF0aW8vdXNlLXJhdGlvLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9uZW50cy9pbWcvUUltZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb21wdXRlZCB9IGZyb20gJ3Z1ZSdcblxuZXhwb3J0IGNvbnN0IHVzZVJhdGlvUHJvcHMgPSB7XG4gIHJhdGlvOiBbIFN0cmluZywgTnVtYmVyIF1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHByb3BzLCBuYXR1cmFsUmF0aW8pIHtcbiAgLy8gcmV0dXJuIHJhdGlvU3R5bGVcbiAgcmV0dXJuIGNvbXB1dGVkKCgpID0+IHtcbiAgICBjb25zdCByYXRpbyA9IE51bWJlcihcbiAgICAgIHByb3BzLnJhdGlvIHx8IChuYXR1cmFsUmF0aW8gIT09IHZvaWQgMCA/IG5hdHVyYWxSYXRpby52YWx1ZSA6IHZvaWQgMClcbiAgICApXG5cbiAgICByZXR1cm4gaXNOYU4ocmF0aW8pICE9PSB0cnVlICYmIHJhdGlvID4gMFxuICAgICAgPyB7IHBhZGRpbmdCb3R0b206IGAkeyAxMDAgLyByYXRpbyB9JWAgfVxuICAgICAgOiBudWxsXG4gIH0pXG59XG4iLCJpbXBvcnQgeyBoLCByZWYsIGNvbXB1dGVkLCB3YXRjaCwgb25Nb3VudGVkLCBUcmFuc2l0aW9uLCBnZXRDdXJyZW50SW5zdGFuY2UgfSBmcm9tICd2dWUnXG5cbmltcG9ydCBRU3Bpbm5lciBmcm9tICcuLi9zcGlubmVyL1FTcGlubmVyLmpzJ1xuXG5pbXBvcnQgeyBpc1J1bnRpbWVTc3JQcmVIeWRyYXRpb24gfSBmcm9tICcuLi8uLi9wbHVnaW5zL3BsYXRmb3JtL1BsYXRmb3JtLmpzJ1xuaW1wb3J0IHVzZVJhdGlvLCB7IHVzZVJhdGlvUHJvcHMgfSBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlLnVzZS1yYXRpby91c2UtcmF0aW8uanMnXG5cbmltcG9ydCB7IGNyZWF0ZUNvbXBvbmVudCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUuY3JlYXRlL2NyZWF0ZS5qcydcbmltcG9ydCB7IGhTbG90IH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS5yZW5kZXIvcmVuZGVyLmpzJ1xuaW1wb3J0IHsgdm1Jc0Rlc3Ryb3llZCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUudm0vdm0uanMnXG5pbXBvcnQgdXNlVGltZW91dCBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy91c2UtdGltZW91dC91c2UtdGltZW91dC5qcydcblxuY29uc3QgZGVmYXVsdFJhdGlvID0gMS43Nzc4IC8qIDE2LzkgKi9cblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlQ29tcG9uZW50KHtcbiAgbmFtZTogJ1FJbWcnLFxuXG4gIHByb3BzOiB7XG4gICAgLi4udXNlUmF0aW9Qcm9wcyxcblxuICAgIHNyYzogU3RyaW5nLFxuICAgIHNyY3NldDogU3RyaW5nLFxuICAgIHNpemVzOiBTdHJpbmcsXG5cbiAgICBhbHQ6IFN0cmluZyxcbiAgICBjcm9zc29yaWdpbjogU3RyaW5nLFxuICAgIGRlY29kaW5nOiBTdHJpbmcsXG4gICAgcmVmZXJyZXJwb2xpY3k6IFN0cmluZyxcblxuICAgIGRyYWdnYWJsZTogQm9vbGVhbixcblxuICAgIGxvYWRpbmc6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGRlZmF1bHQ6ICdsYXp5J1xuICAgIH0sXG4gICAgbG9hZGluZ1Nob3dEZWxheToge1xuICAgICAgdHlwZTogWyBOdW1iZXIsIFN0cmluZyBdLFxuICAgICAgZGVmYXVsdDogMFxuICAgIH0sXG5cbiAgICBmZXRjaHByaW9yaXR5OiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAnYXV0bydcbiAgICB9LFxuICAgIHdpZHRoOiBTdHJpbmcsXG4gICAgaGVpZ2h0OiBTdHJpbmcsXG4gICAgaW5pdGlhbFJhdGlvOiB7XG4gICAgICB0eXBlOiBbIE51bWJlciwgU3RyaW5nIF0sXG4gICAgICBkZWZhdWx0OiBkZWZhdWx0UmF0aW9cbiAgICB9LFxuXG4gICAgcGxhY2Vob2xkZXJTcmM6IFN0cmluZyxcbiAgICBlcnJvclNyYzogU3RyaW5nLFxuXG4gICAgZml0OiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAnY292ZXInXG4gICAgfSxcbiAgICBwb3NpdGlvbjoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZGVmYXVsdDogJzUwJSA1MCUnXG4gICAgfSxcblxuICAgIGltZ0NsYXNzOiBTdHJpbmcsXG4gICAgaW1nU3R5bGU6IE9iamVjdCxcblxuICAgIG5vU3Bpbm5lcjogQm9vbGVhbixcbiAgICBub05hdGl2ZU1lbnU6IEJvb2xlYW4sXG4gICAgbm9UcmFuc2l0aW9uOiBCb29sZWFuLFxuXG4gICAgc3Bpbm5lckNvbG9yOiBTdHJpbmcsXG4gICAgc3Bpbm5lclNpemU6IFN0cmluZ1xuICB9LFxuXG4gIGVtaXRzOiBbICdsb2FkJywgJ2Vycm9yJyBdLFxuXG4gIHNldHVwIChwcm9wcywgeyBzbG90cywgZW1pdCB9KSB7XG4gICAgY29uc3QgbmF0dXJhbFJhdGlvID0gcmVmKHByb3BzLmluaXRpYWxSYXRpbylcbiAgICBjb25zdCByYXRpb1N0eWxlID0gdXNlUmF0aW8ocHJvcHMsIG5hdHVyYWxSYXRpbylcbiAgICBjb25zdCB2bSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpXG5cbiAgICBjb25zdCB7IHJlZ2lzdGVyVGltZW91dDogcmVnaXN0ZXJMb2FkVGltZW91dCwgcmVtb3ZlVGltZW91dDogcmVtb3ZlTG9hZFRpbWVvdXQgfSA9IHVzZVRpbWVvdXQoKVxuICAgIGNvbnN0IHsgcmVnaXN0ZXJUaW1lb3V0OiByZWdpc3RlckxvYWRTaG93VGltZW91dCwgcmVtb3ZlVGltZW91dDogcmVtb3ZlTG9hZFNob3dUaW1lb3V0IH0gPSB1c2VUaW1lb3V0KClcblxuICAgIGNvbnN0IHBsYWNlaG9sZGVySW1nID0gY29tcHV0ZWQoKCkgPT4gKFxuICAgICAgcHJvcHMucGxhY2Vob2xkZXJTcmMgIT09IHZvaWQgMFxuICAgICAgICA/IHsgc3JjOiBwcm9wcy5wbGFjZWhvbGRlclNyYyB9XG4gICAgICAgIDogbnVsbFxuICAgICkpXG5cbiAgICBjb25zdCBlcnJvckltZyA9IGNvbXB1dGVkKCgpID0+IChcbiAgICAgIHByb3BzLmVycm9yU3JjICE9PSB2b2lkIDBcbiAgICAgICAgPyB7IHNyYzogcHJvcHMuZXJyb3JTcmMsIF9fcWVycm9yOiB0cnVlIH1cbiAgICAgICAgOiBudWxsXG4gICAgKSlcblxuICAgIGNvbnN0IGltYWdlcyA9IFtcbiAgICAgIHJlZihudWxsKSxcbiAgICAgIHJlZihwbGFjZWhvbGRlckltZy52YWx1ZSlcbiAgICBdXG5cbiAgICBjb25zdCBwb3NpdGlvbiA9IHJlZigwKVxuXG4gICAgY29uc3QgaXNMb2FkaW5nID0gcmVmKGZhbHNlKVxuICAgIGNvbnN0IGhhc0Vycm9yID0gcmVmKGZhbHNlKVxuXG4gICAgY29uc3QgY2xhc3NlcyA9IGNvbXB1dGVkKCgpID0+XG4gICAgICBgcS1pbWcgcS1pbWctLSR7IHByb3BzLm5vTmF0aXZlTWVudSA9PT0gdHJ1ZSA/ICduby0nIDogJycgfW1lbnVgXG4gICAgKVxuXG4gICAgY29uc3Qgc3R5bGUgPSBjb21wdXRlZCgoKSA9PiAoe1xuICAgICAgd2lkdGg6IHByb3BzLndpZHRoLFxuICAgICAgaGVpZ2h0OiBwcm9wcy5oZWlnaHRcbiAgICB9KSlcblxuICAgIGNvbnN0IGltZ0NsYXNzID0gY29tcHV0ZWQoKCkgPT5cbiAgICAgIGBxLWltZ19faW1hZ2UgJHsgcHJvcHMuaW1nQ2xhc3MgIT09IHZvaWQgMCA/IHByb3BzLmltZ0NsYXNzICsgJyAnIDogJycgfWBcbiAgICAgICsgYHEtaW1nX19pbWFnZS0td2l0aCR7IHByb3BzLm5vVHJhbnNpdGlvbiA9PT0gdHJ1ZSA/ICdvdXQnIDogJycgfS10cmFuc2l0aW9uYFxuICAgICAgKyAnIHEtaW1nX19pbWFnZS0tJ1xuICAgIClcblxuICAgIGNvbnN0IGltZ1N0eWxlID0gY29tcHV0ZWQoKCkgPT4gKHtcbiAgICAgIC4uLnByb3BzLmltZ1N0eWxlLFxuICAgICAgb2JqZWN0Rml0OiBwcm9wcy5maXQsXG4gICAgICBvYmplY3RQb3NpdGlvbjogcHJvcHMucG9zaXRpb25cbiAgICB9KSlcblxuICAgIGZ1bmN0aW9uIHNldExvYWRpbmcgKCkge1xuICAgICAgcmVtb3ZlTG9hZFNob3dUaW1lb3V0KClcblxuICAgICAgaWYgKHByb3BzLmxvYWRpbmdTaG93RGVsYXkgPT09IDApIHtcbiAgICAgICAgaXNMb2FkaW5nLnZhbHVlID0gdHJ1ZVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgcmVnaXN0ZXJMb2FkU2hvd1RpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpc0xvYWRpbmcudmFsdWUgPSB0cnVlXG4gICAgICB9LCBwcm9wcy5sb2FkaW5nU2hvd0RlbGF5KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFyTG9hZGluZyAoKSB7XG4gICAgICByZW1vdmVMb2FkU2hvd1RpbWVvdXQoKVxuICAgICAgaXNMb2FkaW5nLnZhbHVlID0gZmFsc2VcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbkxvYWQgKHsgdGFyZ2V0IH0pIHtcbiAgICAgIGlmICh2bUlzRGVzdHJveWVkKHZtKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmVtb3ZlTG9hZFRpbWVvdXQoKVxuXG4gICAgICAgIG5hdHVyYWxSYXRpby52YWx1ZSA9IHRhcmdldC5uYXR1cmFsSGVpZ2h0ID09PSAwXG4gICAgICAgICAgPyAwLjVcbiAgICAgICAgICA6IHRhcmdldC5uYXR1cmFsV2lkdGggLyB0YXJnZXQubmF0dXJhbEhlaWdodFxuXG4gICAgICAgIHdhaXRGb3JDb21wbGV0ZW5lc3ModGFyZ2V0LCAxKVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHdhaXRGb3JDb21wbGV0ZW5lc3MgKHRhcmdldCwgY291bnQpIHtcbiAgICAgIC8vIHByb3RlY3QgYWdhaW5zdCBydW5uaW5nIGZvcmV2ZXJcbiAgICAgIGlmIChjb3VudCA9PT0gMTAwMCB8fCB2bUlzRGVzdHJveWVkKHZtKSA9PT0gdHJ1ZSkgcmV0dXJuXG5cbiAgICAgIGlmICh0YXJnZXQuY29tcGxldGUgPT09IHRydWUpIHtcbiAgICAgICAgb25SZWFkeSh0YXJnZXQpXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmVnaXN0ZXJMb2FkVGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgd2FpdEZvckNvbXBsZXRlbmVzcyh0YXJnZXQsIGNvdW50ICsgMSlcbiAgICAgICAgfSwgNTApXG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25SZWFkeSAodGFyZ2V0KSB7XG4gICAgICBpZiAodm1Jc0Rlc3Ryb3llZCh2bSkgPT09IHRydWUpIHJldHVyblxuXG4gICAgICBwb3NpdGlvbi52YWx1ZSA9IHBvc2l0aW9uLnZhbHVlIF4gMVxuICAgICAgaW1hZ2VzWyBwb3NpdGlvbi52YWx1ZSBdLnZhbHVlID0gbnVsbFxuXG4gICAgICBjbGVhckxvYWRpbmcoKVxuXG4gICAgICBpZiAodGFyZ2V0LmdldEF0dHJpYnV0ZSgnX19xZXJyb3InKSAhPT0gJ3RydWUnKSB7XG4gICAgICAgIGhhc0Vycm9yLnZhbHVlID0gZmFsc2VcbiAgICAgIH1cblxuICAgICAgZW1pdCgnbG9hZCcsIHRhcmdldC5jdXJyZW50U3JjIHx8IHRhcmdldC5zcmMpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25FcnJvciAoZXJyKSB7XG4gICAgICByZW1vdmVMb2FkVGltZW91dCgpXG4gICAgICBjbGVhckxvYWRpbmcoKVxuXG4gICAgICBoYXNFcnJvci52YWx1ZSA9IHRydWVcbiAgICAgIGltYWdlc1sgcG9zaXRpb24udmFsdWUgXS52YWx1ZSA9IGVycm9ySW1nLnZhbHVlXG4gICAgICBpbWFnZXNbIHBvc2l0aW9uLnZhbHVlIF4gMSBdLnZhbHVlID0gcGxhY2Vob2xkZXJJbWcudmFsdWVcblxuICAgICAgZW1pdCgnZXJyb3InLCBlcnIpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0SW1hZ2UgKGluZGV4KSB7XG4gICAgICBjb25zdCBpbWcgPSBpbWFnZXNbIGluZGV4IF0udmFsdWVcblxuICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAga2V5OiAnaW1nXycgKyBpbmRleCxcbiAgICAgICAgY2xhc3M6IGltZ0NsYXNzLnZhbHVlLFxuICAgICAgICBzdHlsZTogaW1nU3R5bGUudmFsdWUsXG4gICAgICAgIGFsdDogcHJvcHMuYWx0LFxuICAgICAgICBjcm9zc29yaWdpbjogcHJvcHMuY3Jvc3NvcmlnaW4sXG4gICAgICAgIGRlY29kaW5nOiBwcm9wcy5kZWNvZGluZyxcbiAgICAgICAgcmVmZXJyZXJwb2xpY3k6IHByb3BzLnJlZmVycmVycG9saWN5LFxuICAgICAgICBoZWlnaHQ6IHByb3BzLmhlaWdodCxcbiAgICAgICAgd2lkdGg6IHByb3BzLndpZHRoLFxuICAgICAgICBsb2FkaW5nOiBwcm9wcy5sb2FkaW5nLFxuICAgICAgICBmZXRjaHByaW9yaXR5OiBwcm9wcy5mZXRjaHByaW9yaXR5LFxuICAgICAgICAnYXJpYS1oaWRkZW4nOiAndHJ1ZScsXG4gICAgICAgIGRyYWdnYWJsZTogcHJvcHMuZHJhZ2dhYmxlLFxuICAgICAgICAuLi5pbWdcbiAgICAgIH1cblxuICAgICAgaWYgKHBvc2l0aW9uLnZhbHVlID09PSBpbmRleCkge1xuICAgICAgICBPYmplY3QuYXNzaWduKGRhdGEsIHtcbiAgICAgICAgICBjbGFzczogZGF0YS5jbGFzcyArICdjdXJyZW50JyxcbiAgICAgICAgICBvbkxvYWQsXG4gICAgICAgICAgb25FcnJvclxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGRhdGEuY2xhc3MgKz0gJ2xvYWRlZCdcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGgoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7IGNsYXNzOiAncS1pbWdfX2NvbnRhaW5lciBhYnNvbHV0ZS1mdWxsJywga2V5OiAnaW1nJyArIGluZGV4IH0sXG4gICAgICAgIGgoJ2ltZycsIGRhdGEpXG4gICAgICApXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Q29udGVudCAoKSB7XG4gICAgICBpZiAoaXNMb2FkaW5nLnZhbHVlID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gaCgnZGl2Jywge1xuICAgICAgICAgIGtleTogJ2NvbnRlbnQnLFxuICAgICAgICAgIGNsYXNzOiAncS1pbWdfX2NvbnRlbnQgYWJzb2x1dGUtZnVsbCBxLWFuY2hvci0tc2tpcCdcbiAgICAgICAgfSwgaFNsb3Qoc2xvdHNbIGhhc0Vycm9yLnZhbHVlID09PSB0cnVlID8gJ2Vycm9yJyA6ICdkZWZhdWx0JyBdKSlcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGgoJ2RpdicsIHtcbiAgICAgICAga2V5OiAnbG9hZGluZycsXG4gICAgICAgIGNsYXNzOiAncS1pbWdfX2xvYWRpbmcgYWJzb2x1dGUtZnVsbCBmbGV4IGZsZXgtY2VudGVyJ1xuICAgICAgfSwgKFxuICAgICAgICBzbG90cy5sb2FkaW5nICE9PSB2b2lkIDBcbiAgICAgICAgICA/IHNsb3RzLmxvYWRpbmcoKVxuICAgICAgICAgIDogKFxuICAgICAgICAgICAgICBwcm9wcy5ub1NwaW5uZXIgPT09IHRydWVcbiAgICAgICAgICAgICAgICA/IHZvaWQgMFxuICAgICAgICAgICAgICAgIDogW1xuICAgICAgICAgICAgICAgICAgICBoKFFTcGlubmVyLCB7XG4gICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHByb3BzLnNwaW5uZXJDb2xvcixcbiAgICAgICAgICAgICAgICAgICAgICBzaXplOiBwcm9wcy5zcGlubmVyU2l6ZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgKVxuICAgICAgKSlcbiAgICB9XG5cbiAgICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fICE9PSB0cnVlKSB7XG4gICAgICBmdW5jdGlvbiB3YXRjaFNyYyAoKSB7XG4gICAgICAgIHdhdGNoKFxuICAgICAgICAgICgpID0+IChcbiAgICAgICAgICAgIHByb3BzLnNyYyB8fCBwcm9wcy5zcmNzZXQgfHwgcHJvcHMuc2l6ZXNcbiAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICBzcmM6IHByb3BzLnNyYyxcbiAgICAgICAgICAgICAgICAgIHNyY3NldDogcHJvcHMuc3Jjc2V0LFxuICAgICAgICAgICAgICAgICAgc2l6ZXM6IHByb3BzLnNpemVzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICApLFxuICAgICAgICAgIGltZ1Byb3BzID0+IHtcbiAgICAgICAgICAgIHJlbW92ZUxvYWRUaW1lb3V0KClcbiAgICAgICAgICAgIGhhc0Vycm9yLnZhbHVlID0gZmFsc2VcblxuICAgICAgICAgICAgaWYgKGltZ1Byb3BzID09PSBudWxsKSB7XG4gICAgICAgICAgICAgIGNsZWFyTG9hZGluZygpXG4gICAgICAgICAgICAgIGltYWdlc1sgcG9zaXRpb24udmFsdWUgXiAxIF0udmFsdWUgPSBwbGFjZWhvbGRlckltZy52YWx1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIHNldExvYWRpbmcoKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpbWFnZXNbIHBvc2l0aW9uLnZhbHVlIF0udmFsdWUgPSBpbWdQcm9wc1xuICAgICAgICAgIH0sXG4gICAgICAgICAgeyBpbW1lZGlhdGU6IHRydWUgfVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGlmIChpc1J1bnRpbWVTc3JQcmVIeWRyYXRpb24udmFsdWUgPT09IHRydWUpIHtcbiAgICAgICAgb25Nb3VudGVkKHdhdGNoU3JjKVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHdhdGNoU3JjKClcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29uc3QgY29udGVudCA9IFtdXG5cbiAgICAgIGlmIChyYXRpb1N0eWxlLnZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnRlbnQucHVzaChcbiAgICAgICAgICBoKCdkaXYnLCB7IGtleTogJ2ZpbGxlcicsIHN0eWxlOiByYXRpb1N0eWxlLnZhbHVlIH0pXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgaWYgKGltYWdlc1sgMCBdLnZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnRlbnQucHVzaChcbiAgICAgICAgICBnZXRJbWFnZSgwKVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGlmIChpbWFnZXNbIDEgXS52YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICBjb250ZW50LnB1c2goXG4gICAgICAgICAgZ2V0SW1hZ2UoMSlcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBjb250ZW50LnB1c2goXG4gICAgICAgIGgoVHJhbnNpdGlvbiwgeyBuYW1lOiAncS10cmFuc2l0aW9uLS1mYWRlJyB9LCBnZXRDb250ZW50KVxuICAgICAgKVxuXG4gICAgICByZXR1cm4gaCgnZGl2Jywge1xuICAgICAgICBrZXk6ICdtYWluJyxcbiAgICAgICAgY2xhc3M6IGNsYXNzZXMudmFsdWUsXG4gICAgICAgIHN0eWxlOiBzdHlsZS52YWx1ZSxcbiAgICAgICAgcm9sZTogJ2ltZycsXG4gICAgICAgICdhcmlhLWxhYmVsJzogcHJvcHMuYWx0XG4gICAgICB9LCBjb250ZW50KVxuICAgIH1cbiAgfVxufSlcbiJdLCJuYW1lcyI6WyJ1c2VSYXRpb1Byb3BzIiwidXNlUmF0aW8iLCJwcm9wcyIsIm5hdHVyYWxSYXRpbyIsImNvbXB1dGVkIiwicmF0aW8iLCJkZWZhdWx0UmF0aW8iLCJRSW1nIiwiY3JlYXRlQ29tcG9uZW50Iiwic2xvdHMiLCJlbWl0IiwicmVmIiwicmF0aW9TdHlsZSIsInZtIiwiZ2V0Q3VycmVudEluc3RhbmNlIiwicmVnaXN0ZXJMb2FkVGltZW91dCIsInJlbW92ZUxvYWRUaW1lb3V0IiwidXNlVGltZW91dCIsInJlZ2lzdGVyTG9hZFNob3dUaW1lb3V0IiwicmVtb3ZlTG9hZFNob3dUaW1lb3V0IiwicGxhY2Vob2xkZXJJbWciLCJlcnJvckltZyIsImltYWdlcyIsInBvc2l0aW9uIiwiaXNMb2FkaW5nIiwiaGFzRXJyb3IiLCJjbGFzc2VzIiwic3R5bGUiLCJpbWdDbGFzcyIsImltZ1N0eWxlIiwic2V0TG9hZGluZyIsImNsZWFyTG9hZGluZyIsIm9uTG9hZCIsInRhcmdldCIsInZtSXNEZXN0cm95ZWQiLCJ3YWl0Rm9yQ29tcGxldGVuZXNzIiwiY291bnQiLCJvblJlYWR5Iiwib25FcnJvciIsImVyciIsImdldEltYWdlIiwiaW5kZXgiLCJpbWciLCJkYXRhIiwiaCIsImdldENvbnRlbnQiLCJoU2xvdCIsIlFTcGlubmVyIiwid2F0Y2hTcmMiLCJ3YXRjaCIsImltZ1Byb3BzIiwiaXNSdW50aW1lU3NyUHJlSHlkcmF0aW9uIiwib25Nb3VudGVkIiwiY29udGVudCIsIlRyYW5zaXRpb24iXSwibWFwcGluZ3MiOiJtSUFFTyxNQUFNQSxFQUFnQixDQUMzQixNQUFPLENBQUUsT0FBUSxNQUFRLENBQzNCLEVBRWUsU0FBQUMsRUFBVUMsRUFBT0MsRUFBYyxDQUU1QyxPQUFPQyxFQUFTLElBQU0sQ0FDcEIsTUFBTUMsRUFBUSxPQUNaSCxFQUFNLFFBQVVDLElBQWlCLE9BQVNBLEVBQWEsTUFBUSxPQUNoRSxFQUVELE9BQU8sTUFBTUUsQ0FBSyxJQUFNLElBQVFBLEVBQVEsRUFDcEMsQ0FBRSxjQUFlLEdBQUksSUFBTUEsSUFBVyxFQUN0QyxJQUNSLENBQUcsQ0FDSCxDQ0xBLE1BQU1DLEVBQWUsT0FFckIsSUFBQUMsRUFBZUMsRUFBZ0IsQ0FDN0IsS0FBTSxPQUVOLE1BQU8sQ0FDTCxHQUFHUixFQUVILElBQUssT0FDTCxPQUFRLE9BQ1IsTUFBTyxPQUVQLElBQUssT0FDTCxZ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
